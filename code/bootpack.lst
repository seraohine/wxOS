     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 0000024C                     	CALL	_init_palette
    18 00000008 6A 78                           	PUSH	120
    19 0000000A 6A 78                           	PUSH	120
    20 0000000C 6A 14                           	PUSH	20
    21 0000000E 6A 14                           	PUSH	20
    22 00000010 6A 01                           	PUSH	1
    23 00000012 68 00000140                     	PUSH	320
    24 00000017 68 000A0000                     	PUSH	655360
    25 0000001C E8 000002CE                     	CALL	_boxfill8
    26 00000021 68 00000096                     	PUSH	150
    27 00000026 68 000000AA                     	PUSH	170
    28 0000002B 6A 32                           	PUSH	50
    29 0000002D 6A 46                           	PUSH	70
    30 0000002F 6A 02                           	PUSH	2
    31 00000031 68 00000140                     	PUSH	320
    32 00000036 68 000A0000                     	PUSH	655360
    33 0000003B E8 000002AF                     	CALL	_boxfill8
    34 00000040 83 C4 38                        	ADD	ESP,56
    35 00000043 68 00000096                     	PUSH	150
    36 00000048 68 000000AA                     	PUSH	170
    37 0000004D 6A 32                           	PUSH	50
    38 0000004F 6A 46                           	PUSH	70
    39 00000051 6A 04                           	PUSH	4
    40 00000053 68 00000140                     	PUSH	320
    41 00000058 68 000A0000                     	PUSH	655360
    42 0000005D E8 0000028D                     	CALL	_boxfill8
    43 00000062 68 000000AB                     	PUSH	171
    44 00000067 68 0000013F                     	PUSH	319
    45 0000006C 6A 00                           	PUSH	0
    46 0000006E 6A 00                           	PUSH	0
    47 00000070 6A 0E                           	PUSH	14
    48 00000072 68 00000140                     	PUSH	320
    49 00000077 68 000A0000                     	PUSH	655360
    50 0000007C E8 0000026E                     	CALL	_boxfill8
    51 00000081 83 C4 38                        	ADD	ESP,56
    52 00000084 68 000000AC                     	PUSH	172
    53 00000089 68 0000013F                     	PUSH	319
    54 0000008E 68 000000AC                     	PUSH	172
    55 00000093 6A 00                           	PUSH	0
    56 00000095 6A 08                           	PUSH	8
    57 00000097 68 00000140                     	PUSH	320
    58 0000009C 68 000A0000                     	PUSH	655360
    59 000000A1 E8 00000249                     	CALL	_boxfill8
    60 000000A6 68 000000AD                     	PUSH	173
    61 000000AB 68 0000013F                     	PUSH	319
    62 000000B0 68 000000AD                     	PUSH	173
    63 000000B5 6A 00                           	PUSH	0
    64 000000B7 6A 07                           	PUSH	7
    65 000000B9 68 00000140                     	PUSH	320
    66 000000BE 68 000A0000                     	PUSH	655360
    67 000000C3 E8 00000227                     	CALL	_boxfill8
    68 000000C8 83 C4 38                        	ADD	ESP,56
    69 000000CB 68 000000C7                     	PUSH	199
    70 000000D0 68 0000013F                     	PUSH	319
    71 000000D5 68 000000AE                     	PUSH	174
    72 000000DA 6A 00                           	PUSH	0
    73 000000DC 6A 08                           	PUSH	8
    74 000000DE 68 00000140                     	PUSH	320
    75 000000E3 68 000A0000                     	PUSH	655360
    76 000000E8 E8 00000202                     	CALL	_boxfill8
    77 000000ED 68 000000B0                     	PUSH	176
    78 000000F2 6A 3B                           	PUSH	59
    79 000000F4 68 000000B0                     	PUSH	176
    80 000000F9 6A 03                           	PUSH	3
    81 000000FB 6A 07                           	PUSH	7
    82 000000FD 68 00000140                     	PUSH	320
    83 00000102 68 000A0000                     	PUSH	655360
    84 00000107 E8 000001E3                     	CALL	_boxfill8
    85 0000010C 83 C4 38                        	ADD	ESP,56
    86 0000010F 68 000000C4                     	PUSH	196
    87 00000114 6A 02                           	PUSH	2
    88 00000116 68 000000B0                     	PUSH	176
    89 0000011B 6A 02                           	PUSH	2
    90 0000011D 6A 07                           	PUSH	7
    91 0000011F 68 00000140                     	PUSH	320
    92 00000124 68 000A0000                     	PUSH	655360
    93 00000129 E8 000001C1                     	CALL	_boxfill8
    94 0000012E 68 000000C4                     	PUSH	196
    95 00000133 6A 3B                           	PUSH	59
    96 00000135 68 000000C4                     	PUSH	196
    97 0000013A 6A 03                           	PUSH	3
    98 0000013C 6A 0F                           	PUSH	15
    99 0000013E 68 00000140                     	PUSH	320
   100 00000143 68 000A0000                     	PUSH	655360
   101 00000148 E8 000001A2                     	CALL	_boxfill8
   102 0000014D 83 C4 38                        	ADD	ESP,56
   103 00000150 68 000000C3                     	PUSH	195
   104 00000155 6A 3B                           	PUSH	59
   105 00000157 68 000000B1                     	PUSH	177
   106 0000015C 6A 3B                           	PUSH	59
   107 0000015E 6A 0F                           	PUSH	15
   108 00000160 68 00000140                     	PUSH	320
   109 00000165 68 000A0000                     	PUSH	655360
   110 0000016A E8 00000180                     	CALL	_boxfill8
   111 0000016F 68 000000C5                     	PUSH	197
   112 00000174 6A 3B                           	PUSH	59
   113 00000176 68 000000C5                     	PUSH	197
   114 0000017B 6A 02                           	PUSH	2
   115 0000017D 6A 00                           	PUSH	0
   116 0000017F 68 00000140                     	PUSH	320
   117 00000184 68 000A0000                     	PUSH	655360
   118 00000189 E8 00000161                     	CALL	_boxfill8
   119 0000018E 83 C4 38                        	ADD	ESP,56
   120 00000191 68 000000C5                     	PUSH	197
   121 00000196 6A 3C                           	PUSH	60
   122 00000198 68 000000B0                     	PUSH	176
   123 0000019D 6A 3C                           	PUSH	60
   124 0000019F 6A 00                           	PUSH	0
   125 000001A1 68 00000140                     	PUSH	320
   126 000001A6 68 000A0000                     	PUSH	655360
   127 000001AB E8 0000013F                     	CALL	_boxfill8
   128 000001B0 68 000000B0                     	PUSH	176
   129 000001B5 68 0000013C                     	PUSH	316
   130 000001BA 68 000000B0                     	PUSH	176
   131 000001BF 68 00000111                     	PUSH	273
   132 000001C4 6A 0F                           	PUSH	15
   133 000001C6 68 00000140                     	PUSH	320
   134 000001CB 68 000A0000                     	PUSH	655360
   135 000001D0 E8 0000011A                     	CALL	_boxfill8
   136 000001D5 83 C4 38                        	ADD	ESP,56
   137 000001D8 68 000000C4                     	PUSH	196
   138 000001DD 68 00000111                     	PUSH	273
   139 000001E2 68 000000B1                     	PUSH	177
   140 000001E7 68 00000111                     	PUSH	273
   141 000001EC 6A 0F                           	PUSH	15
   142 000001EE 68 00000140                     	PUSH	320
   143 000001F3 68 000A0000                     	PUSH	655360
   144 000001F8 E8 000000F2                     	CALL	_boxfill8
   145 000001FD 68 000000C5                     	PUSH	197
   146 00000202 68 0000013C                     	PUSH	316
   147 00000207 68 000000C5                     	PUSH	197
   148 0000020C 68 00000111                     	PUSH	273
   149 00000211 6A 07                           	PUSH	7
   150 00000213 68 00000140                     	PUSH	320
   151 00000218 68 000A0000                     	PUSH	655360
   152 0000021D E8 000000CD                     	CALL	_boxfill8
   153 00000222 83 C4 38                        	ADD	ESP,56
   154 00000225 68 000000C5                     	PUSH	197
   155 0000022A 68 0000013D                     	PUSH	317
   156 0000022F 68 000000B0                     	PUSH	176
   157 00000234 68 0000013D                     	PUSH	317
   158 00000239 6A 07                           	PUSH	7
   159 0000023B 68 00000140                     	PUSH	320
   160 00000240 68 000A0000                     	PUSH	655360
   161 00000245 E8 000000A5                     	CALL	_boxfill8
   162 0000024A 83 C4 1C                        	ADD	ESP,28
   163 0000024D                                 L2:
   164 0000024D E8 [00000000]                   	CALL	_io_hlt
   165 00000252 EB F9                           	JMP	L2
   166                                          [SECTION .data]
   167 00000000                                 _table_rgb.0:
   168 00000000 00                              	DB	0
   169 00000001 00                              	DB	0
   170 00000002 00                              	DB	0
   171 00000003 FF                              	DB	-1
   172 00000004 00                              	DB	0
   173 00000005 00                              	DB	0
   174 00000006 00                              	DB	0
   175 00000007 FF                              	DB	-1
   176 00000008 00                              	DB	0
   177 00000009 FF                              	DB	-1
   178 0000000A FF                              	DB	-1
   179 0000000B 00                              	DB	0
   180 0000000C 00                              	DB	0
   181 0000000D 00                              	DB	0
   182 0000000E FF                              	DB	-1
   183 0000000F FF                              	DB	-1
   184 00000010 00                              	DB	0
   185 00000011 FF                              	DB	-1
   186 00000012 00                              	DB	0
   187 00000013 FF                              	DB	-1
   188 00000014 FF                              	DB	-1
   189 00000015 FF                              	DB	-1
   190 00000016 FF                              	DB	-1
   191 00000017 FF                              	DB	-1
   192 00000018 C6                              	DB	-58
   193 00000019 C6                              	DB	-58
   194 0000001A C6                              	DB	-58
   195 0000001B 84                              	DB	-124
   196 0000001C 00                              	DB	0
   197 0000001D 00                              	DB	0
   198 0000001E 00                              	DB	0
   199 0000001F 84                              	DB	-124
   200 00000020 00                              	DB	0
   201 00000021 84                              	DB	-124
   202 00000022 84                              	DB	-124
   203 00000023 00                              	DB	0
   204 00000024 00                              	DB	0
   205 00000025 00                              	DB	0
   206 00000026 84                              	DB	-124
   207 00000027 84                              	DB	-124
   208 00000028 00                              	DB	0
   209 00000029 84                              	DB	-124
   210 0000002A 00                              	DB	0
   211 0000002B 84                              	DB	-124
   212 0000002C 84                              	DB	-124
   213 0000002D 84                              	DB	-124
   214 0000002E 84                              	DB	-124
   215 0000002F 84                              	DB	-124
   216                                          [SECTION .text]
   217 00000254                                 	GLOBAL	_init_palette
   218 00000254                                 _init_palette:
   219 00000254 55                              	PUSH	EBP
   220 00000255 89 E5                           	MOV	EBP,ESP
   221 00000257 68 [00000000]                   	PUSH	_table_rgb.0
   222 0000025C 6A 0F                           	PUSH	15
   223 0000025E 6A 00                           	PUSH	0
   224 00000260 E8 00000002                     	CALL	_set_palette
   225 00000265 C9                              	LEAVE
   226 00000266 C3                              	RET
   227 00000267                                 	GLOBAL	_set_palette
   228 00000267                                 _set_palette:
   229 00000267 55                              	PUSH	EBP
   230 00000268 89 E5                           	MOV	EBP,ESP
   231 0000026A 57                              	PUSH	EDI
   232 0000026B 56                              	PUSH	ESI
   233 0000026C 53                              	PUSH	EBX
   234 0000026D 51                              	PUSH	ECX
   235 0000026E 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   236 00000271 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   237 00000274 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   238 00000277 E8 [00000000]                   	CALL	_io_load_eflags
   239 0000027C 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   240 0000027F E8 [00000000]                   	CALL	_io_cli
   241 00000284 53                              	PUSH	EBX
   242 00000285 68 000003C8                     	PUSH	968
   243 0000028A E8 [00000000]                   	CALL	_io_out8
   244 0000028F 39 FB                           	CMP	EBX,EDI
   245 00000291 58                              	POP	EAX
   246 00000292 5A                              	POP	EDX
   247 00000293 7E 12                           	JLE	L11
   248 00000295                                 L13:
   249 00000295 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   250 00000298 89 45 08                        	MOV	DWORD [8+EBP],EAX
   251 0000029B 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   252 0000029E 5B                              	POP	EBX
   253 0000029F 5E                              	POP	ESI
   254 000002A0 5F                              	POP	EDI
   255 000002A1 5D                              	POP	EBP
   256 000002A2 E9 [00000000]                   	JMP	_io_store_eflags
   257 000002A7                                 L11:
   258 000002A7 8A 06                           	MOV	AL,BYTE [ESI]
   259 000002A9 43                              	INC	EBX
   260 000002AA C0 E8 02                        	SHR	AL,2
   261 000002AD 0F B6 C0                        	MOVZX	EAX,AL
   262 000002B0 50                              	PUSH	EAX
   263 000002B1 68 000003C9                     	PUSH	969
   264 000002B6 E8 [00000000]                   	CALL	_io_out8
   265 000002BB 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   266 000002BE C0 E8 02                        	SHR	AL,2
   267 000002C1 0F B6 C0                        	MOVZX	EAX,AL
   268 000002C4 50                              	PUSH	EAX
   269 000002C5 68 000003C9                     	PUSH	969
   270 000002CA E8 [00000000]                   	CALL	_io_out8
   271 000002CF 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   272 000002D2 C0 E8 02                        	SHR	AL,2
   273 000002D5 83 C6 03                        	ADD	ESI,3
   274 000002D8 0F B6 C0                        	MOVZX	EAX,AL
   275 000002DB 50                              	PUSH	EAX
   276 000002DC 68 000003C9                     	PUSH	969
   277 000002E1 E8 [00000000]                   	CALL	_io_out8
   278 000002E6 83 C4 18                        	ADD	ESP,24
   279 000002E9 39 FB                           	CMP	EBX,EDI
   280 000002EB 7E BA                           	JLE	L11
   281 000002ED EB A6                           	JMP	L13
   282 000002EF                                 	GLOBAL	_boxfill8
   283 000002EF                                 _boxfill8:
   284 000002EF 55                              	PUSH	EBP
   285 000002F0 89 E5                           	MOV	EBP,ESP
   286 000002F2 57                              	PUSH	EDI
   287 000002F3 56                              	PUSH	ESI
   288 000002F4 53                              	PUSH	EBX
   289 000002F5 57                              	PUSH	EDI
   290 000002F6 57                              	PUSH	EDI
   291 000002F7 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   292 000002FA 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   293 000002FD 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   294 00000300 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   295 00000303 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   296 00000306 7F 31                           	JG	L26
   297 00000308 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   298 0000030B 0F AF D9                        	IMUL	EBX,ECX
   299 0000030E                                 L24:
   300 0000030E 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   301 00000311 39 FA                           	CMP	EDX,EDI
   302 00000313 7F 1B                           	JG	L28
   303 00000315 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   304 00000318 01 DE                           	ADD	ESI,EBX
   305 0000031A 01 D6                           	ADD	ESI,EDX
   306 0000031C 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   307 0000031F                                 L23:
   308 0000031F 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   309 00000322 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   310 00000325 42                              	INC	EDX
   311 00000326 88 06                           	MOV	BYTE [ESI],AL
   312 00000328 46                              	INC	ESI
   313 00000329 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   314 0000032C 39 FA                           	CMP	EDX,EDI
   315 0000032E 7E EF                           	JLE	L23
   316 00000330                                 L28:
   317 00000330 41                              	INC	ECX
   318 00000331 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   319 00000334 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   320 00000337 7E D5                           	JLE	L24
   321 00000339                                 L26:
   322 00000339 5B                              	POP	EBX
   323 0000033A 5E                              	POP	ESI
   324 0000033B 5B                              	POP	EBX
   325 0000033C 5E                              	POP	ESI
   326 0000033D 5F                              	POP	EDI
   327 0000033E 5D                              	POP	EBP
   328 0000033F C3                              	RET
